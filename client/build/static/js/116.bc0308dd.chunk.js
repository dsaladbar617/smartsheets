"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[116],{6116:function(e,l,a){a.r(l),a.d(l,{default:function(){return Z}});var i=a(2791),s=a(6871),t=a(5712),d=a(9237),n=a(2487),r=a(7457),u=JSON.parse('{"name":"Example Sheet","short_name":"EX","sheet_id":1001,"fields":[{"name":"Tail No.","type":"text","field_id":1,"favorited":true,"archived":false},{"name":"JCN","type":"text","field_id":2,"favorited":true,"archived":false},{"name":"Supply Doc No.","type":"text","field_id":3,"favorited":true,"archived":false},{"name":"Nomenclature","type":"text","field_id":4,"favorited":true,"archived":false},{"name":"WUC/REFDES","type":"text","field_id":5,"favorited":false,"archived":false},{"name":"Part Number","type":"number","field_id":6,"favorited":false,"archived":false},{"name":"NSN","type":"text","field_id":7,"favorited":false,"archived":false},{"name":"Tech Order","type":"text","field_id":8,"favorited":false,"archived":false},{"name":"Figure","type":"text","field_id":9,"favorited":false,"archived":false},{"name":"Index","type":"text","field_id":10,"favorited":false,"archived":false},{"name":"Quantity","type":"number","field_id":11,"favorited":false,"archived":false},{"name":"Sign-Out Name","type":"text","field_id":12,"favorited":false,"archived":false},{"name":"Sign-Out Man No.","type":"text","field_id":13,"favorited":false,"archived":false},{"name":"Sign-Out Date","type":"text","field_id":14,"favorited":false,"archived":false}],"entries":[{"entry_id":1,"archived":false,"values":[{"value":"7089","field_id":1,"value_id":1},{"value":"21265111","field_id":2,"value_id":2},{"value":"1","field_id":3,"value_id":3},{"value":"1","field_id":4,"value_id":4},{"value":"1","field_id":5,"value_id":5},{"value":"1","field_id":6,"value_id":6},{"value":"1","field_id":7,"value_id":7},{"value":"Yeah","field_id":8,"value_id":8},{"value":"13","field_id":9,"value_id":9},{"value":"68","field_id":10,"value_id":10},{"value":"20","field_id":11,"value_id":11},{"value":"","field_id":12,"value_id":12},{"value":"","field_id":13,"value_id":13},{"value":"","field_id":14,"value_id":14}]},{"entry_id":2,"archived":false,"values":[{"value":"7089","field_id":1,"value_id":15},{"value":"21265111","field_id":2,"value_id":16},{"value":"1","field_id":3,"value_id":17},{"value":"1","field_id":4,"value_id":18},{"value":"1","field_id":5,"value_id":19},{"value":"1","field_id":6,"value_id":20},{"value":"1","field_id":7,"value_id":21},{"value":"No","field_id":8,"value_id":22},{"value":"22","field_id":9,"value_id":23},{"value":"12","field_id":10,"value_id":24},{"value":"69","field_id":11,"value_id":25},{"value":"4/20/2020","field_id":12,"value_id":26},{"value":"46432","field_id":13,"value_id":27},{"value":"KWOLFE","field_id":14,"value_id":28}]}]}'),c=JSON.parse('{"name":"Kinds of Food","short_name":"KOF","sheet_id":1002,"fields":[{"name":"Name","type":"text","field_id":101,"favorited":true,"archived":false},{"name":"Type","type":"text","field_id":102,"favorited":true,"archived":false},{"name":"Serving Size","type":"text","field_id":103,"favorited":true,"archived":false},{"name":"Stock","type":"number","field_id":104,"favorited":true,"archived":false},{"name":"Is Beans?","type":"checkbox","field_id":105,"favorited":false,"archived":false}],"entries":[{"entry_id":101,"archived":false,"values":[{"value":"Apple","field_id":101,"value_id":101},{"value":"Fruit","field_id":102,"value_id":102},{"value":"1/2 Apple","field_id":103,"value_id":103},{"value":"12","field_id":104,"value_id":104},{"value":"false","field_id":105,"value_id":105}]},{"entry_id":102,"archived":false,"values":[{"value":"Carrot","field_id":101,"value_id":106},{"value":"Vegetable","field_id":102,"value_id":107},{"value":"1 Carrot","field_id":103,"value_id":108},{"value":"84","field_id":104,"value_id":109},{"value":"false","field_id":105,"value_id":110}]},{"entry_id":103,"archived":false,"values":[{"value":"Milk","field_id":101,"value_id":111},{"value":"Dairy","field_id":102,"value_id":112},{"value":"1 Cup","field_id":103,"value_id":113},{"value":"4","field_id":104,"value_id":114},{"value":"false","field_id":105,"value_id":115}]},{"entry_id":104,"archived":false,"values":[{"value":"Family Size Baked Beans","field_id":101,"value_id":116},{"value":"Vegetable","field_id":102,"value_id":117},{"value":"2 Cans","field_id":103,"value_id":118},{"value":"9001","field_id":104,"value_id":119},{"value":"true","field_id":105,"value_id":120}]},{"entry_id":105,"archived":false,"values":[{"value":"Bread","field_id":101,"value_id":121},{"value":"Grains","field_id":102,"value_id":122},{"value":"1 Slice","field_id":103,"value_id":123},{"value":"15","field_id":104,"value_id":124},{"value":"false","field_id":105,"value_id":125}]},{"entry_id":106,"archived":false,"values":[{"value":"Doritos","field_id":101,"value_id":126},{"value":"Snack","field_id":102,"value_id":127},{"value":"1 ounce","field_id":103,"value_id":128},{"value":"8","field_id":104,"value_id":129},{"value":"false","field_id":105,"value_id":130}]},{"entry_id":107,"archived":false,"values":[{"value":"Apple","field_id":101,"value_id":101},{"value":"Fruit","field_id":102,"value_id":102},{"value":"1/2 Apple","field_id":103,"value_id":103},{"value":"12","field_id":104,"value_id":104},{"value":"false","field_id":105,"value_id":105}]},{"entry_id":108,"archived":false,"values":[{"value":"Carrot","field_id":101,"value_id":106},{"value":"Vegetable","field_id":102,"value_id":107},{"value":"1 Carrot","field_id":103,"value_id":108},{"value":"84","field_id":104,"value_id":109},{"value":"false","field_id":105,"value_id":110}]},{"entry_id":109,"archived":false,"values":[{"value":"Milk","field_id":101,"value_id":111},{"value":"Dairy","field_id":102,"value_id":112},{"value":"1 Cup","field_id":103,"value_id":113},{"value":"4","field_id":104,"value_id":114},{"value":"false","field_id":105,"value_id":115}]},{"entry_id":110,"archived":false,"values":[{"value":"Family Size Baked Beans","field_id":101,"value_id":116},{"value":"Vegetable","field_id":102,"value_id":117},{"value":"2 Cans","field_id":103,"value_id":118},{"value":"9001","field_id":104,"value_id":119},{"value":"true","field_id":105,"value_id":120}]},{"entry_id":111,"archived":false,"values":[{"value":"Bread","field_id":101,"value_id":121},{"value":"Grains","field_id":102,"value_id":122},{"value":"1 Slice","field_id":103,"value_id":123},{"value":"15","field_id":104,"value_id":124},{"value":"false","field_id":105,"value_id":125}]},{"entry_id":112,"archived":false,"values":[{"value":"Doritos","field_id":101,"value_id":126},{"value":"Snack","field_id":102,"value_id":127},{"value":"1 ounce","field_id":103,"value_id":128},{"value":"8","field_id":104,"value_id":129},{"value":"false","field_id":105,"value_id":130}]},{"entry_id":113,"archived":false,"values":[{"value":"Apple","field_id":101,"value_id":101},{"value":"Fruit","field_id":102,"value_id":102},{"value":"1/2 Apple","field_id":103,"value_id":103},{"value":"12","field_id":104,"value_id":104},{"value":"false","field_id":105,"value_id":105}]},{"entry_id":114,"archived":false,"values":[{"value":"Carrot","field_id":101,"value_id":106},{"value":"Vegetable","field_id":102,"value_id":107},{"value":"1 Carrot","field_id":103,"value_id":108},{"value":"84","field_id":104,"value_id":109},{"value":"false","field_id":105,"value_id":110}]},{"entry_id":115,"archived":false,"values":[{"value":"Milk","field_id":101,"value_id":111},{"value":"Dairy","field_id":102,"value_id":112},{"value":"1 Cup","field_id":103,"value_id":113},{"value":"4","field_id":104,"value_id":114},{"value":"false","field_id":105,"value_id":115}]},{"entry_id":116,"archived":false,"values":[{"value":"Family Size Baked Beans","field_id":101,"value_id":116},{"value":"Vegetable","field_id":102,"value_id":117},{"value":"2 Cans","field_id":103,"value_id":118},{"value":"9001","field_id":104,"value_id":119},{"value":"true","field_id":105,"value_id":120}]},{"entry_id":117,"archived":false,"values":[{"value":"Bread","field_id":101,"value_id":121},{"value":"Grains","field_id":102,"value_id":122},{"value":"1 Slice","field_id":103,"value_id":123},{"value":"15","field_id":104,"value_id":124},{"value":"false","field_id":105,"value_id":125}]},{"entry_id":118,"archived":false,"values":[{"value":"Doritos","field_id":101,"value_id":126},{"value":"Snack","field_id":102,"value_id":127},{"value":"1 ounce","field_id":103,"value_id":128},{"value":"8","field_id":104,"value_id":129},{"value":"false","field_id":105,"value_id":130}]},{"entry_id":119,"archived":false,"values":[{"value":"Apple","field_id":101,"value_id":101},{"value":"Fruit","field_id":102,"value_id":102},{"value":"1/2 Apple","field_id":103,"value_id":103},{"value":"12","field_id":104,"value_id":104},{"value":"false","field_id":105,"value_id":105}]},{"entry_id":120,"archived":false,"values":[{"value":"Carrot","field_id":101,"value_id":106},{"value":"Vegetable","field_id":102,"value_id":107},{"value":"1 Carrot","field_id":103,"value_id":108},{"value":"84","field_id":104,"value_id":109},{"value":"false","field_id":105,"value_id":110}]},{"entry_id":121,"archived":false,"values":[{"value":"Milk","field_id":101,"value_id":111},{"value":"Dairy","field_id":102,"value_id":112},{"value":"1 Cup","field_id":103,"value_id":113},{"value":"4","field_id":104,"value_id":114},{"value":"false","field_id":105,"value_id":115}]},{"entry_id":122,"archived":false,"values":[{"value":"Family Size Baked Beans","field_id":101,"value_id":116},{"value":"Vegetable","field_id":102,"value_id":117},{"value":"2 Cans","field_id":103,"value_id":118},{"value":"9001","field_id":104,"value_id":119},{"value":"true","field_id":105,"value_id":120}]},{"entry_id":123,"archived":false,"values":[{"value":"Bread","field_id":101,"value_id":121},{"value":"Grains","field_id":102,"value_id":122},{"value":"1 Slice","field_id":103,"value_id":123},{"value":"15","field_id":104,"value_id":124},{"value":"false","field_id":105,"value_id":125}]},{"entry_id":124,"archived":false,"values":[{"value":"Doritos","field_id":101,"value_id":126},{"value":"Snack","field_id":102,"value_id":127},{"value":"1 ounce","field_id":103,"value_id":128},{"value":"8","field_id":104,"value_id":129},{"value":"false","field_id":105,"value_id":130}]}]}'),o=a(184),v=function(e){var l=(0,i.useContext)(t.R).sheet,a=e.data,d=(0,s.UO)().entryId,n=(0,s.s0)(),r=function(e){new Date-l.clickTime.current<150&&n("/sheet/".concat(l.currentSheet.sheet_id,"/").concat(a.entry_id))};return(0,o.jsxs)("tr",{className:"entry-row ".concat(a.entry_id===parseInt(d)?"entry-highlighted":""),id:a.entry_id,children:[l.currentSheet.fields.map((function(e,l){var i=a.values.findIndex((function(l){return l.field_id===e.field_id}));return"checkbox"===e.type?-1===i?(0,o.jsxs)("td",{className:"sheet-display-cell",onClick:function(e){return r()},children:[console.log("no checkbox"),(0,o.jsx)("input",{type:"checkbox",disabled:!0})]},l):(0,o.jsx)("td",{className:"sheet-display-cell",onClick:function(e){return r()},children:(0,o.jsx)("input",{type:"checkbox",checked:"true"===a.values[i].value,disabled:!0})},l):-1===i?(0,o.jsx)("td",{className:"sheet-display-cell",onClick:function(e){return r()}},l):(0,o.jsx)("td",{className:"sheet-display-cell",onClick:function(e){return r()},children:a.values[i].value},l)})),(0,o.jsx)("td",{className:"entry-row-option no-select",onClick:function(){console.log(a)},children:"\u22ee"})]},a.entry_id)},f=a(5861),_=a(7762),h=a(885),m=a(7757),p=a.n(m);a(8872);a.p;var y=a(6140),x=function(){var e=(0,i.useContext)(t.R).sheet,l=(0,i.useState)(!1),a=(0,h.Z)(l,2),d=a[0],r=a[1],u=(0,s.TH)(),c=(0,s.UO)().entryId,v=(e.sheetPageView,e.setSheetPageView,e.setSelectedEntry),m=(0,s.s0)(),x=function(){var l,a=(0,_.Z)(document.getElementsByClassName("entry-details-field"));try{for(a.s();!(l=a.n()).done;){var i=l.value;JSON.parse(i.dataset.field),i.querySelector("input")}}catch(s){a.e(s)}finally{a.f()}r(!0),new Promise((function(e){return setTimeout(e,500)})).then((function(){e.setSelectedEntry({}),e.setNewEntry(!1),r(!1),m("/sheet/".concat(u.pathname.split("/")[2]))}))};return(0,i.useEffect)((function(){if(void 0!==c){var l=e.currentSheet.entries.findIndex((function(e){return e.entry_id===parseInt(c)}));if(-1!==l){e.setSelectedEntry(e.currentSheet.entries[l]);var a=document.getElementById(c).offsetTop;a>document.getElementsByClassName("sheet-display-body")[0].offsetHeight-200&&document.getElementsByClassName("sheet-display-body")[0].scroll({top:a-400,behavior:"smooth"})}else 0!==e.currentSheet.sheet_id&&!1===e.sheetLoading&&(v({}),m("/sheet/".concat(u.pathname.split("/")[2])))}else v({});0===e.currentSheet.sheet_id&&!1===e.sheetLoading&&(v({}),m("/"))}),[u,e.currentSheet,e.sheetLoading]),0===Object.keys(e.selectedEntry).length&&!1===e.newEntry?(0,o.jsx)("div",{className:"entry-details-container hidden"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"entry-details-container",children:[(0,o.jsxs)("div",{className:"entry-details-header no-select",children:[(0,o.jsx)("span",{children:!0===e.newEntry?"New Entry":"Update Entry"}),(0,o.jsx)("button",{className:"entry-details-cancel cancel-desktop",onClick:function(){m("/sheet/".concat(u.pathname.split("/")[2])),e.setSelectedEntry({}),e.setNewEntry(!1)},children:">"}),(0,o.jsx)("button",{className:"entry-details-cancel cancel-mobile",onClick:function(){m("/sheet/".concat(u.pathname.split("/")[2])),e.setSelectedEntry({}),e.setNewEntry(!1)},children:"x"})]}),(0,o.jsx)("form",{className:"entry-details-form",children:e.currentSheet.fields.map((function(l,a){var i,s;return i=!1===e.newEntry?e.selectedEntry.values.findIndex((function(e){return e.field_id===l.field_id})):-1,(0,o.jsxs)("div",{"data-field":JSON.stringify(l),className:"entry-details-field",onClick:function(e){e.currentTarget.getElementsByClassName("entry-details-input")[0].focus()},onFocus:function(e){var l,a=(0,_.Z)(document.getElementsByClassName("entry-details-field"));try{for(a.s();!(l=a.n()).done;){l.value.classList.remove("field-selected")}}catch(i){a.e(i)}finally{a.f()}e.target.closest(".entry-details-field").classList.add("field-selected")},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"field-name",children:l.name}),(0,o.jsx)("span",{className:"field-type",children:(s=l.type,s.charAt(0).toUpperCase()+s.slice(1))})]}),(0,o.jsx)("hr",{}),"checkbox"===l.type?(0,o.jsxs)("div",{className:"entry-details-checkbox-row",children:[(0,o.jsx)("input",{id:"".concat(l.field_id,"_").concat(-1===i?"new":e.selectedEntry.values[i].value_id),className:"entry-details-checkbox",type:"checkbox",defaultChecked:-1!==i&&"true"===e.selectedEntry.values[i].value,onChange:function(e){var l=e.target.nextSibling;l.innerText="Yes"===l.innerText?"No":"Yes"}},-1===i?"new":e.selectedEntry.values[i].value_id),(0,o.jsx)("div",{className:"entry-details-checkbox-text",children:-1===i?"No":"true"===e.selectedEntry.values[i].value?"Yes":"No"})]}):(0,o.jsx)("input",{id:"".concat(l.field_id,"_").concat(-1===i?"new":e.selectedEntry.values[i].value_id),className:"entry-details-input",defaultValue:-1===i?"":e.selectedEntry.values[i].value},-1===i?"new":e.selectedEntry.values[i].value_id),(0,o.jsx)("div",{className:"entry-field-line"})]},a)}))}),(0,o.jsx)("button",{className:"entry-details-update no-select",onClick:function(){var e=(0,f.Z)(p().mark((function e(l){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.preventDefault(),x(),y.ZP.success("Entry Updated");case 3:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}(),children:"Submit"}),!0===d?(0,o.jsx)("div",{className:"entry-details-loader",children:"Please Wait..."}):(0,o.jsx)(o.Fragment,{})]}),(0,o.jsx)(n.ZC,{className:"entry-details-underlay",fills:!0,onClick:function(){m("/sheet/".concat(u.pathname.split("/")[2])),e.setSelectedEntry({}),e.setNewEntry(!1)}}),(0,o.jsx)(n.ZC,{className:"entry-details-underlay-sidebar",fills:!0,onClick:function(){m("/sheet/".concat(u.pathname.split("/")[2])),e.setSelectedEntry({}),e.setNewEntry(!1)}})]})},g=a(7382),j=function(e){var l=document.getElementById(e),a={top:0,left:0,x:0,y:0},i=function e(a){a.preventDefault(),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",e),l.style.cursor="grab",l.style.removeProperty("user-select")},s=function(e){var i=e.clientX-a.x,s=e.clientY-a.y;l.scrollTop=a.top-s,l.scrollLeft=a.left-i};return function(e){l.style.cursor="grabbing",l.style.userSelect="none",a={left:l.scrollLeft,top:l.scrollTop,x:e.clientX,y:e.clientY},document.addEventListener("mousemove",s),document.addEventListener("mouseup",(function(){return i(e)}))}},N=a(7798),k=function(){var e=(0,s.s0)(),l=s.UO.entryId,a=((0,s.TH)(),j("scroll-container")),n=(0,i.useContext)(d.k).store,r=(n.theme,n.isAuth,n.setIsAuth,(0,i.useContext)(t.R).sheet),f=(0,s.UO)().sheetId,_=r.sheetPageView,h=r.setSheetPageView,m=(r.setSelectedEntry,r.selectedEntry),p=r.newEntry,y=(r.setCurrentSheet,n.user);n.setSheetAccess,n.refresh;return(0,i.useEffect)((function(){m.entry_id>0?h("edit-entry"):!0===p?h("new-entry"):void 0===m.entry_id&&h("sheet")}),[m,p]),(0,i.useEffect)((function(){r.setSheetLoading(!0),"1001"===f?r.setCurrentSheet(u):"1002"===f?r.setCurrentSheet(c):isNaN(f)?e("/"):(0,N.ZP)(["GET","get_sheet/".concat(f)],y.token).then((function(e){void 0===e.name&&(e.name=e.sheet.name),r.setCurrentSheet(e),r.setSheetLoading(!1)})).catch((function(e){r.setSheetLoading(!1),console.log("error",e)}))}),[f]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"sheet-display-container ".concat("edit-entry"===_||"new-entry"===_?"shrink":""),children:[(0,o.jsxs)("div",{className:"sheet-display-header",children:[(0,o.jsxs)("div",{className:"sheet-header-meta",children:[(0,o.jsx)("img",{className:"sheet-header-icon no-select",src:g}),(0,o.jsx)("span",{className:"nowrap",children:r.currentSheet.name})]}),(0,o.jsxs)("div",{className:"sheet-search no-select",children:[(0,o.jsx)("input",{placeholder:"Search"}),(0,o.jsx)("button",{children:"Filter"})]})]}),(0,o.jsx)("div",{id:"scroll-container",className:"sheet-display-body",onMouseDown:function(e){r.clickTime.current=new Date,a(e)},children:(0,o.jsxs)("table",{className:"sheet-display-table",children:[(0,o.jsx)("thead",{className:"no-select",children:(0,o.jsxs)("tr",{children:[r.currentSheet.fields.map((function(e,l){return(0,o.jsx)("td",{className:"sheet-display-cell",children:e.name},l)})),(0,o.jsx)("td",{className:"sheet-display-cell"},"option")]})}),(0,o.jsx)("tbody",{children:r.currentSheet.entries.map((function(e,l){return(0,o.jsx)(v,{data:e},l)}))})]})}),(0,o.jsx)("button",{className:"dummy-users-button",onClick:function(){return e("/sheet/".concat(r.currentSheet.sheet_id,"/users"))},children:(0,o.jsx)("img",{alt:"edit-icon"})}),(0,o.jsx)("button",{className:"new-entry no-select",onClick:function(){return r.setNewEntry(!0)},children:(0,o.jsx)("img",{alt:"edit-icon"})})]}),(0,o.jsx)(x,{entryId:l})]})},S=JSON.parse('{"r":[{"user_id":1,"name":"Kevin Kevin","role":"Owner"},{"user_id":2,"name":"Kyle Boyz","role":"Owner"},{"user_id":3,"name":"Levi Frontend","role":"Owner"},{"user_id":4,"name":"Daniel Backend","role":"Daniel"},{"user_id":5,"name":"Dayan Bois","role":"Owner"},{"user_id":6,"name":"Kenyon Weaver","role":"Editor"},{"user_id":7,"name":"Martha Hardy","role":"Editor"},{"user_id":8,"name":"Aliya Combs","role":"Viewer"},{"user_id":9,"name":"Dustin Becker","role":"Editor"},{"user_id":10,"name":"Anton Strickland","role":"Viewer"},{"user_id":11,"name":"Dante Mullins","role":"Viewer"},{"user_id":12,"name":"Emmanuel Yoder","role":"Editor"},{"user_id":13,"name":"Benjamin Koch","role":"Viewer"},{"user_id":14,"name":"Alicia Kramer","role":"Viewer"},{"user_id":15,"name":"Melanie Greer","role":"Viewer"},{"user_id":16,"name":"Desirae Moon","role":"Viewer"},{"user_id":17,"name":"Adeline Cooper","role":"Editor"},{"user_id":18,"name":"Wyatt McMahon","role":"Viewer"},{"user_id":19,"name":"Kenneth Cordova","role":"Editor"},{"user_id":20,"name":"Alessandra Munoz","role":"Viewer"},{"user_id":21,"name":"Eden Blair","role":"Viewer"},{"user_id":22,"name":"Joshua Kidd","role":"Editor"},{"user_id":23,"name":"Brenda Hobbs","role":"Viewer"},{"user_id":24,"name":"Jaylen Lam","role":"Editor"},{"user_id":25,"name":"Hailey Knight","role":"Viewer"},{"user_id":26,"name":"Colt Sanford","role":"Editor"},{"user_id":27,"name":"Noel Gordon","role":"Editor"},{"user_id":28,"name":"Megan Ray","role":"Editor"},{"user_id":29,"name":"Hector Middleton","role":"Editor"},{"user_id":30,"name":"Sarah Newman","role":"Viewer"}]}'),E=a(1684),A=(a(3028),a(7394)),C=function(){var e=(0,i.useState)([]),l=(0,h.Z)(e,2),a=l[0],s=l[1];return{sheetUsers:a,setSheetUsers:function(e){s(e)}}},w=(0,i.createContext)(),b=function(e){var l=e.children,a=C(),i={sheetUsers:a.sheetUsers,setSheetUsers:a.setSheetUsers};return(0,o.jsx)(w.Provider,{value:{userAccess:i},children:l})},B=function(){var e=(0,i.useState)([]),l=(0,h.Z)(e,2),a=l[0],n=l[1],r=(0,i.useState)(!1),u=(0,h.Z)(r,2),c=u[0],v=u[1],f=(0,s.s0)(),_=(0,s.TH)(),m=(0,i.useState)(""),p=(0,h.Z)(m,2),x=p[0],g=p[1],k=j("user-scroll-container"),A=(0,i.useContext)(d.k).store,C=(0,i.useContext)(t.R).sheet,b=(0,i.useContext)(w).userAccess,B=A.user;A.setSheetAccess,A.refresh;(0,i.useEffect)((function(){_.pathname.split("/").length>=5&&"lookup"===_.pathname.split("/")[4]?(v(!0),console.log(_.pathname.split("/")[2]),"1001"===_.pathname.split("/")[2]||"1002"===_.pathname.split("/")[2]?(n(S.r),k=j("user-scroll-container")):(0,N.ZP)(["GET","get_all_users/"],B.token).then((function(e){e.map((function(e){return e.user_id=e.id})),n(e),v(!0)})).catch((function(e){return console.log("error",e)}))):v(!1)}),[_.pathname]),(0,i.useEffect)((function(){k=j("user-scroll-container")}),[c]);var U=function(e,l){if(new Date-C.clickTime.current<150){console.log("Attempting to add User ID: ".concat(e,", Name: ").concat(l));var a=b.sheetUsers.findIndex((function(l){return l.user_id===parseInt(e)}));if(-1===a){var i=new Headers;i.append("Authorization","Bearer ".concat(B.token)),i.append("Content-Type","application/json");JSON.stringify({users:[{user_id:e,role_name:"Viewer"}]});var s=_.pathname.split("/")[2],t={users:[{user_id:e,role_name:"Viewer"}]};(0,N.ZP)(["POST","add_user_roles/".concat(s),t],B.token).then((function(e){y.ZP.success("User Added"),(0,N.ZP)(["GET","get_sheet_users/".concat(s)],B.token).then((function(e){b.setSheetUsers(e),0===e.length&&(console.log(e),f("/"))})).catch((function(e){return console.log("error",e)}))})).catch((function(e){return console.log("error",e)}))}else y.ZP.error("User Already a Member")}};return(0,o.jsx)(o.Fragment,{children:!1===c?(0,o.jsx)("div",{className:"user-lookup-container hidden",children:(0,o.jsx)("div",{id:"user-scroll-container",className:"user-lookup-body"})}):(0,o.jsxs)("div",{className:"user-lookup-container",children:[(0,o.jsxs)("div",{className:"user-lookup-header no-select",children:[(0,o.jsx)("span",{children:"User Lookup"}),(0,o.jsx)("button",{className:"user-lookup-cancel cancel-desktop",onClick:function(){f("/sheet/".concat(_.pathname.split("/")[2],"/users")),n([])},children:">"}),(0,o.jsx)("button",{className:"user-lookup-cancel cancel-mobile",onClick:function(){f("/sheet/".concat(_.pathname.split("/")[2],"/users")),n([])},children:"x"})]}),(0,o.jsxs)("div",{className:"user-lookup-search",children:[(0,o.jsx)("div",{className:"user-lookup-input",children:(0,o.jsx)("input",{placeholder:"Search",onChange:function(e){return g(e.target.value)}})}),(0,o.jsx)("div",{className:"user-search-line"})]}),(0,o.jsx)("div",{id:"user-scroll-container",className:"user-lookup-body",onMouseDown:function(e){C.clickTime.current=new Date,k(e)},children:a.filter((function(e){return e.name.match(new RegExp(x,"i","g"))||e.name.match(new RegExp(x,"i","g"))})).map((function(e){var l=e.user_id,a=e.name;return void 0!==e.email&&null!==e.email||(e.email="".concat(e.name.split(" ")[0],".").concat(e.name.split(" ")[1],"@gmail.com")),void 0===e.role&&(e.role=e.role_name),(0,o.jsxs)("div",{className:"user-lookup-result",children:[(0,o.jsx)("img",{src:E,className:"user-lookup-image no-select",alt:"profile-image"}),(0,o.jsxs)("div",{className:"user-lookup-data",children:[(0,o.jsx)("span",{className:"data-name",children:e.name}),(0,o.jsx)("span",{className:"data-email",children:e.email})]}),(0,o.jsx)("button",{onClick:function(){return U(l,a)},className:"user-search-add no-select",children:"+"})]},l)}))})]})})},U=function(){var e,l=(0,i.useContext)(d.k).store,a=(0,i.useContext)(t.R).sheet,n=(0,i.useContext)(w).userAccess,r=(0,i.useState)(0),u=(0,h.Z)(r,2),c=u[0],v=u[1],f=(0,i.useState)("simple"),m=(0,h.Z)(f,2),p=m[0],x=(m[1],j("scroll-container")),g=(0,s.TH)(),k=(0,s.s0)(),C=(0,i.useRef)([]),b=(0,i.useState)(""),U=(0,h.Z)(b,2),Z=U[0],D=U[1],I=l.user;l.setSheetAccess,l.refresh;(0,i.useEffect)((function(){}),[n.sheetUsers]),(0,i.useEffect)((function(){if(1001===(e=parseInt(g.pathname.split("/")[2]))||1002===e){var l=A.sheets.findIndex((function(l){return l.sheet_id===e}));D(A.sheets[l].name),n.setSheetUsers(S.r)}else(0,N.ZP)(["GET","get_sheet_users/".concat(e)],I.token).then((function(e){n.setSheetUsers(e),0===e.length&&(console.log(e),k("/"))})).catch((function(e){return console.log("error",e)}))}),[]);var P=function(){e=parseInt(g.pathname.split("/")[2]),(0,N.ZP)(["GET","get_sheet_users/".concat(e)],I.token).then((function(e){n.setSheetUsers(e),0===e.length?(console.log(e),k("/")):k(g.pathname)})).catch((function(e){return console.log("error",e)}))},V=function(e){var l={users:[e]},a=g.pathname.split("/")[2];(0,N.ZP)(["DELETE","remove_roles/".concat(a),l],I.token).then((function(e){y.ZP.success("User Removed"),console.log(e)})).catch((function(e){return console.log("error",e)}))};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"users-display-container ".concat(g.pathname.split("/").length>=5&&"lookup"===g.pathname.split("/")[4]?"shrink":""),children:[(0,o.jsxs)("div",{className:"users-display-header",children:[(0,o.jsxs)("div",{className:"users-header-meta",children:[(0,o.jsx)("div",{className:"users-header-icon",children:(0,o.jsx)("img",{})}),(0,o.jsxs)("div",{className:"users-header-title",children:[(0,o.jsx)("span",{className:"page-name nowrap",children:"User Access"}),(0,o.jsx)("span",{className:"sheet-name ".concat(""===Z?"filler":""," nowrap"),children:""===Z?"Loading...":Z})]})]}),(0,o.jsx)("div",{className:"users-search",children:c<=0?(0,o.jsx)("button",{className:"update-disabled",disabled:!0,children:"Update"}):(0,o.jsx)("button",{className:"update-enabled",onClick:function(){var e,l={users:[]},a=(0,_.Z)(document.getElementsByClassName("role-changed"));try{for(a.s();!(e=a.n()).done;){var i=e.value;console.log("Set User ID: ".concat(i.closest("tr").id," to ").concat(i.value)),l.users.push({user_id:i.closest("tr").id,role_name:i.value})}}catch(n){a.e(n)}finally{a.f()}v(0);var s=g.pathname.split("/")[2],t=new Headers;t.append("Authorization","Bearer ".concat(I.token)),t.append("Content-Type","application/json");var d={method:"PATCH",headers:t,redirect:"follow",body:JSON.stringify(l)};fetch("http://localhost:8080/api/edit_user_roles/".concat(s),d).then((function(e){return e.json()})).then((function(e){y.ZP.success("Users Roles Updated!"),console.log(e),P()})).catch((function(e){return console.log("error",e)})),console.log(l)},children:"Update"})})]}),(0,o.jsx)("div",{id:"scroll-container",className:"users-display-body",onMouseDown:function(e){a.clickTime.current=new Date,x(e)},children:"smart"===p?(0,o.jsx)("div",{children:"Wow!"}):(0,o.jsxs)("table",{className:"users-display-table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"users-display-cell"}),(0,o.jsx)("td",{className:"users-display-cell",children:"Name"}),(0,o.jsx)("td",{className:"users-display-cell",children:"Role"}),(0,o.jsx)("td",{className:"users-display-cell",children:"E-Mail"}),(0,o.jsx)("td",{className:"users-display-cell"})]})}),(0,o.jsx)("tbody",{children:n.sheetUsers.map((function(e,l){return void 0!==e.email&&null!==e.email||(e.email="".concat(e.name.split(" ")[0],".").concat(e.name.split(" ")[1],"@gmail.com")),void 0===e.role&&(e.role=e.role_name),(0,o.jsxs)("tr",{id:e.user_id,className:"user-row",children:[(0,o.jsx)("td",{className:"user-row-picture",children:(0,o.jsx)("img",{className:"user-profile-picture",src:void 0!==e.picture?e.picture:E})}),(0,o.jsx)("td",{className:"users-display-cell",children:e.name}),(0,o.jsx)("td",{className:"users-display-cell",children:(0,o.jsx)("select",{defaultValue:e.role,className:"users-display-role-select",onChange:function(l){if(l.target.value!==e.role)l.target.classList.contains("role-changed")||(l.target.classList.add("role-changed"),v(c+1),C.current.push({user_id:e.user_id,role_name:l.target.value}));else if(l.target.classList.contains("role-changed")){l.target.classList.remove("role-changed"),v(c-1);var a=C.current.findIndex((function(e){return e.user_id===e.id}));C.current.splice(a,1)}},children:["Owner","Editor","Viewer","Daniel"].map((function(l){return(0,o.jsx)("option",{className:"".concat(l===e.role?"previous-value":"other-value"),value:l,children:l},"option-".concat(l))}))})}),(0,o.jsx)("td",{className:"users-display-cell",children:e.email}),(0,o.jsx)("td",{className:"user-row-option",children:(0,o.jsx)("img",{alt:"delete-icon",onClick:function(){V(e)}})})]},l)}))})]})})]}),(0,o.jsx)(B,{}),(0,o.jsxs)("button",{className:"add-user",onClick:function(){return k("lookup")},children:[(0,o.jsx)("img",{className:"primary-image"}),(0,o.jsx)("img",{className:"secondary-image"})]}),(0,o.jsx)("button",{className:"users-display-exit",onClick:function(){return k(-1)},children:"<"})]})},Z=(a(4280),function(){var e=(0,i.lazy)((function(){return Promise.resolve().then(a.bind(a,6147))}));return(0,o.jsx)("div",{className:"sheet-page",children:(0,o.jsx)(b,{children:(0,o.jsxs)(s.Z5,{children:[(0,o.jsx)(s.AW,{path:"/",element:(0,o.jsx)(k,{})}),(0,o.jsx)(s.AW,{path:"/users/*",element:(0,o.jsx)(i.Suspense,{fallback:(0,o.jsx)(r.Z,{}),children:(0,o.jsx)(U,{})})}),(0,o.jsx)(s.AW,{path:"/edit/*",element:(0,o.jsx)(i.Suspense,{fallback:(0,o.jsx)(r.Z,{}),children:(0,o.jsx)(e,{})})}),(0,o.jsx)(s.AW,{path:"/:entryId",element:(0,o.jsx)(i.Suspense,{fallback:(0,o.jsx)(r.Z,{}),children:(0,o.jsx)(k,{})})}),(0,o.jsx)(s.AW,{path:"/:entryId/*",element:(0,o.jsxs)(i.Suspense,{fallback:(0,o.jsx)(r.Z,{}),children:[(0,o.jsx)(r.Z,{}),(0,o.jsx)(s.Fg,{to:"/sheet/".concat(location.pathname.split("/")[2])})]})}),(0,o.jsx)(s.AW,{path:"/*",element:(0,o.jsx)(e,{})})]})})})})},8872:function(e,l,a){e.exports=a.p+"static/media/edit-purple.a0e8d81540338bc1fdde.png"},7382:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjEuNv1OCegAAAH+SURBVHhe7ZyxSsNQGEYzioOIr+EszuLqXkcHsYUSUcEKVSFP4KJUwccwcYhDN19AK/g0lRsDkdO/vWlJFu/3w5ma/hwP9MbpRtbcnb9vXZ/mjzvbnWkIDPtvo+RsvFn++YtnGOfP1pIQGPbzpzLD7CTJy/qgl35ZXwyJq242cS3KLNVcdtOJ9YUQGZxk32WW3wn5ZzUPdwYXcdzhZD0gOlP3sopCelsty02cP0TWB6KiVqCD/YulaWJH29DRwhvIWlyHpva0DT2JAsGTKBA8iQLBkygQPIkCwZMoEDyJAsGTKBA8iQLBkygQPIkCwZMoEDyJN1DoKJAHBfKgQB68gY4PRyvR1J62oSdRIHgSBYInUSB4EgWCJ1EgeBIFgidRIHgSBYInUSB4Em+gvd3eSjS1p23oSRQInkSB4EkUCJ5EhzQ8iQLBkygQPIkCwZMoEDyJAsGTKBA8iQLBkygQPIkCwZN4A1n/ntehqT1tQ0+iQPAkCgRPokDwJDqk4UkUCJ5EgeBJFAieRIHgSRQInkSB4EkUCJ5EgeBJvIEc1mIfTexoGzpa1AoUMpG7XMj6QHSmt3F+r8tNFpDErxvFDTDu5iXrgZApLjb5O7pgqWLQzT7KLNW4a6kUycVJP5Oj8VqZZXZCvk9o5mc1b9zB7R62lvxH3NvKviYwin4AsR8Z319jEXwAAAAASUVORK5CYII="}}]);
//# sourceMappingURL=116.bc0308dd.chunk.js.map